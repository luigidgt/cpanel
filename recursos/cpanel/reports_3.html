<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
		<title>IDXBoost | Welcome</title>
		<meta name="keywords" content="FlexIdx, listing, Filters, Analytics">
		<meta name="description" content="FlexIdx, the best dashboard admin listing, Filters, Analytics">
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<link rel="stylesheet" type="text/css" href="../../css/style.css">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
		<link id="page_favicon" type="image/x-icon" rel="icon" href="../../img/favicon.png">
	</head>
	<body>
		<div class="rs-wrapper">
			<header class="rs-navbar">
				<h1>IDX Boost</h1>
				<nav>
					<div class="logo">
						<a href="#" title="IDX Boost™">
						<img src="https://cpanel.idxboost.dev/bundles/cpanel/images/logo.png" title="IDX Boost!" alt="Cutting-Edge MLS/IDX Search for Wordpress">
						</a>
						<button class="ms-hidden-menu-btn">Hidden Menu <span></span></button>
					</div>
					<div class="header-nav">

						<ul id="list_nav">
							<li><a href="#" title="Home">Home</a></li>
							<li><a href="#" title="My Membership">My Membership</a></li>
							<li><a href="#" title="Inbox">Inbox</a></li>
							<li><a href="#" title="My Tasks">My Tasks</a></li>
							<li><a href="#" title="IDXBoost Store">IDXBoost Store</a></li>
							<li><a href="#" title="Help">Help</a></li>
						</ul>

						<!--<div class="ms-warning-message">
							<i class="crm-ico-alert-triangle">Warning</i>
							<span>You must set up your <strong>email sender</strong> to set up your account <a href="#">Click here to resolve</a></span>
						</div>-->

						<div class="user_nav">
							<div class="ms-dropdown dropdown">
								<button class="ms-button btn userAvatar" type="button" data-toggle="dropdown" aria-expanded="false">
									<div title="Master IDXBoost" id="userAvatar">
										<div class="user_avatar idxboost-photo-preview" style="background-color: transparent">
											<img src="https://idxboost.s3.amazonaws.com/user/account/_pwjxbr7pb/foto-agent.jpg" alt="Master IDXBoost">
										</div>
										<h2>Master IDXBoost</h2>
									</div>
								</button>
								<ul class="ms-dropdown-list dropdown-menu">
									<li class="ms-item-hidden"><a href="#" title="Home">Home</a></li>
									<li class="ms-item-hidden"><a href="#" title="My Membership">My Membership</a></li>
									<li class="ms-item-hidden"><a href="#" title="Inbox">Inbox</a></li>
									<li class="ms-item-hidden"><a href="#" title="My Tasks">My Tasks</a></li>
									<li class="ms-item-hidden"><a href="#" title="IDXBoost Store">IDXBoost Store</a></li>
									<li><a href="#" target="_blank">Support</a></li>
									<li><a href="#" title="Log out">Log out</a></li>
								</ul>
							</div>
						</div>
					</div>
					<button class="main_menu" id="mainMene">Main Menu <span></span></button>
				</nav>
			</header>

			<aside class="rs-sidebar">
				<div class="title-rs-sidebar">Main menu</div>
				<button id="closeMenu">Close</button>
				<ul class="ms-menu-list ">
					<li class="idx-tutorial-step-leads"><a href="#" title="My Leads" class="item_nav ico-leads active">My Leads<span style="width:40px;height:40px;" class="gb">21</span></a></li>
					<li><a href="#" title="Hot Sheet" class="item_nav ico-inquires ">Hot Sheet<span style="width:40px;height:40px;" class="gb">18</span></a></li>
					<li class="idx-tutorial-step-account">
						<a href="#" title="My Account" class="item_nav ico-account sub-items">My Account</a>
						<ul class="sub_item_nav">
							<li><a href="#" title="My Profile">My Profile</a></li>
							<li><a href="#" title="Registration Key">Registration Key</a></li>
							<li><a href="#" title="Change Password">Change Password</a></li>
						</ul>
					</li>
					<li><a href="#" title="Property Sities" class="item_nav ico-spicon ">Property Sites</a>
					</li>
					<li class="idx-tutorial-step-account ms-bg-blue">
						<a href="#" title="Properties" class="item_nav ico-areas sub-items">IDX Integration</a>
						<ul class="sub_item_nav">
							<li><a href="#" title="My Listings">My Listings</a></li>
							<li class="ico-my-master-plan"><a href="#" title="Map Search Filters">Map Search Filters</a></li>
							<li class="ico-display-filters"><a href="#" title="Display Filters">Display Filters</a></li>
							<li class="ico-my-buildings"><a href="#" title="My Buildings">My Buildings</a></li>
							<li><a href="#" title="IDX Settings">IDXSettings</a></li>
						</ul>
					</li>
					<li>
						<a href="#" title="CRM &amp; Automations" class="item_nav ico-marketing sub-items">CRM &amp; Automations</a>
						<ul class="sub_item_nav">
							<li><a href="#" title="My Bucket">My Buckets</a></li>
							<li><a href="#" title="Drip Campaigns">Drip Campaigns</a></li>
							<li><a href="#" title="Lead Rules">Lead Rules</a></li>
							<li><a href="#" title="Email Templates">Email Templates</a></li>
							<li><a href="#" title="SMS Templates">SMS Templates</a></li>
							<li><a href="#" title="Agents">Users</a></li>
							<li><a href="#" title="Users Groups">Users Groups</a></li>
							<li><a href="#" title="Offices">Offices</a></li>
						</ul>
					</li>
					<li class="ms-bg-green">
						<a href="#" title="Lead Generation" class="sub-items item_nav ico-team">Lead Generation</a>
						<ul class="sub_item_nav">
							<li><a href="/settings/registration" title="Boost Conversion Tool">Boost Conversion Tool</a></li>
							<li><a href="/cms-forms/?page=forms" title="Custom Forms">Custom Forms</a></li>
							<li><a href="/cms-pages/?page=landing" title="Landing">Landing Pages</a></li>
						</ul>
					</li>
					<li class="idx-tutorial-step-email idx-tutorial-step-settings">
						<a href="#" title="Settings" class="item_nav ico-setting sub-items">Settings</a>
						<ul class="sub_item_nav ">
							<li><a href="#" class="" title="Smtp Settings">Email Sender</a></li>
							<li><a href="#" class="" title="Smtp Signature">Email Signature</a></li>
							<li><a href="#" title="CRM Integration">CRM Integrations</a></li>
							<li><a href="#" title="Analytics Integration">AnalyticsIntegration</a></li>
							<li><a href="#" title="Terms &amp; Conditions">Terms &amp;Conditions</a></li>
						</ul>
					</li>
					<li class="group-cpanel-btn">
						<a href="#" title="Go to my Website" class="group-btn ico-rocket">Go to my Website<span></span></a>
						<a href="#" title="Go to my WP Dashboard" class="group-btn ico-wordpress">Go to my WP Dashboard<span></span></a>
						<a href="#" title="Synchronize my Wordpress" class="group-btn ico-sync" data-toggle="modal" data-target="#synchronizeModal">
							Synchronize my Wordpress<span></span>
							<i class="active-sync-bullet"></i>
						</a>
					</li>
					<li class="active-sync">
						<div class="ms-float-modal-alert">
							<i class="active-sync-bullet"></i>
							<div class="ms-body">You have changes that need to be synched with your website. <strong>Click the icon to sync now.</strong></div>
						</div>
					</li>
				</ul>
			</aside>

			<section class="rs-content-wrapper">
				<div class="ms-new-basic-form ms-basic-pd">
					<div class="rs-content-body container basicPage ms-new-basic-form">

						<div class="ms-header" style="position: relative;">
							<h2 class="ms-title">Reports of Visits</h2>
							<div class="ms-wrapper-date">
								<!--{{ current_date|date('Y-m-d') }}-->
								<!--AÑO MES DÍA-->

								<input class="ms-hidden" type="text" id="InitdateSelected" value="2024, 06, 22">
								<input class="ms-hidden" type="text" id="dateSelected" value="2024-09-06">
								<input class="ms-hidden" type="text" id="idSite" value="4">

								<button class="ms-button btn ms-wrapper-icon-calendar js-show-calendar" type="button">
									<strong id="textDateSelected">2024-09-06</strong>
									<i class="crm-ico-ms-calendar"></i>
								</button>

								<div class="ms-wrapper-modal-calendar">

									<div class="ms-wrapper-calendars">
										<div id="calendarPeriodDay" class="ms-hidden_calendar active"></div>
										<div id="calendarPeriodWeek" class="ms-hidden_calendar"></div>
										<div id="calendarPeriodMonth" class="ms-hidden_calendar"></div>
										<div id="calendarPeriodYear" class="ms-hidden_calendar"></div>
										<div id="calendarPeriodRange" class="ms-hidden_calendar">
											<div class="ms-flex-calendar">
												<div class="ms-from">
													<div class="ms-header-calendar-text">
														<span>From</span>
														<span id="calendarPeriodRangeFrom">2024-09-06</span>
													</div>
													<div id="calendarPeriodRangeStart"></div>
												</div>
												<div class="ms-to">
													<div class="ms-header-calendar-text">
														<span>To</span>
														<span id="calendarPeriodRangeTo">2024-09-06</span>
													</div>
													<div id="calendarPeriodRangeEnd"></div>
												</div>
											</div>
										</div>
									</div>

									<div class="ms-wrapper-calndar-options">
										<strong>Period</strong>
										<ul>
											<li>
												<div class="ms-wrap-radio">
													<input type="radio" name="period" id="period_id_day" class="js-chk-period" value="period_id_day" checked>
													<label for="period_id_day">Day</label>
												</div>
											</li>
											<li>
												<div class="ms-wrap-radio">
													<input type="radio" name="period" id="period_id_week" class="js-chk-period" value="period_id_week">
													<label for="period_id_week">Week</label>
												</div>
											</li>
											<li>
												<div class="ms-wrap-radio">
													<input type="radio" name="period" id="period_id_month" class="js-chk-period" value="period_id_month">
													<label for="period_id_month">Month</label>
												</div>
											</li>
											<li>
												<div class="ms-wrap-radio">
													<input type="radio" name="period" id="period_id_year" class="js-chk-period" value="period_id_year">
													<label for="period_id_year">Year</label>
												</div>
											</li>
											<li>
												<div class="ms-wrap-radio">
													<input type="radio" name="period" id="period_id_range" class="js-chk-period" value="period_id_range">
													<label for="period_id_range">Date range</label>
												</div>
											</li>
										</ul>
										<button class="btn btn-dgt-def" id="dataFilterApply">
											<span>Apply</span>
										</button>
									</div>
								</div>
							</div>
						</div>

						<div class="ms-header-pt -gs">
							<button class="ms-select-item-list js-select-item-list">Visits</button>
							<ul class="ms-tab">
								<li>
									<button class="ms-btn-tab -shadow active js-active-tab" data-tab="#Visits">Visits</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#RealTimeVisits">Real Time Visits</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#ChartOfTheLatestVisits">Latest Visits</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#TheMostActive">Most Active</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#OverviewOfVisits">Overview Visits</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#VisitorsMap">Visitors</button>
								</li>
								<li>
									<button class="ms-btn-tab -shadow js-active-tab" data-tab="#ChannelTypes">Channel Types</button>
								</li>
							</ul>
						</div>

						<div class="ms-body-pt">

							<!--VISITAS FORMATO CORTO-->
							<div class="ms-item-tab js-tab-item active in" id="Visits">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Visits</h5>
									<div id="iframeVisits"></div>
								</div>
							</div>

							<!--VISITAS EN TIEMPO REAL-->
							<div class="ms-item-tab js-tab-item" id="RealTimeVisits">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Real Time Visits</h5>
									<div id="iframeRealTimeVisits"></div>
								</div>
							</div>

							<!--ULTIMAS VISITAS GRAFICA-->
							<div class="ms-item-tab js-tab-item" id="ChartOfTheLatestVisits">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Latest Visits</h5>
									<div id="iframeLatestVisits"></div>
								</div>
							</div>

							<!--LO MÁS ACTIVO-->
							<div class="ms-item-tab js-tab-item" id="TheMostActive">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">The Most Active</h5>
									<div id="iframeTheMostActive"></div>
								</div>
							</div>

							<!--VISION GENERAL DE VISITAS-->
							<div class="ms-item-tab js-tab-item" id="OverviewOfVisits">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Overview Of Visits</h5>
									<div id="iframeOverviewOfVisits"></div>
								</div>
							</div>

							<!--MAPA DE VISITAS EN TIEMPO REAL-->
							<div class="ms-item-tab js-tab-item" id="VisitorsMap">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Visitors</h5>
									<div id="iframeVisitorsMap"></div>
								</div>
							</div>

							<!--CHANNEL TYPES-->
							<div class="ms-item-tab js-tab-item" id="ChannelTypes">
								<div class="widgetIframe">
									<h5 class="ms-widget-title">Channel Types</h5>
									<div id="iframeChannelTypes"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>


		<div id="rs-screen-overlay"></div>

		<script type="text/javascript" src="../../js/jquery-3.1.1.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

		<script type="text/javascript" src="../../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../../js/select2.min.js"></script>
		<script type="text/javascript" src="../../js/main.js"></script>

		<script>
			var 
			endDate_Day, 
			startDate_Day, 
			endDate_Week, 
			startDate_Week, 
			endDate_Month, 
			startDate_Month, 
			endDate_Year, 
			startDate_Year,
			endDate_Range, 
			startDate_Range;

			//FUNCION PARA GENERAR LOS IFRAMES CON LAS GRAFICAS
			function createAnalitycsIframe(selectDate,clientId){
				var selectDate = selectDate;
				var clientId = clientId;
				jQuery('.js-show-calendar').removeClass("-active");
				jQuery("#iframeVisits").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=CoreVisualizations&actionToWidgetize=singleMetricView&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeRealTimeVisits").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=Live&actionToWidgetize=widget&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeLatestVisits").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?forceView=1&viewDataTable=graphEvolution&module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=VisitsSummary&actionToWidgetize=getEvolutionGraph&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeTheMostActive").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=Insights&actionToWidgetize=getInsightsOverview&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeOverviewOfVisits").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?forceView=1&viewDataTable=sparklines&module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=VisitsSummary&actionToWidgetize=get&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeVisitorsMap").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=UserCountryMap&actionToWidgetize=realtimeMap&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
				jQuery("#iframeChannelTypes").empty().html('<iframe width="100%" height="350" src="https://matomo.idxboost.dev/index.php?module=Widgetize&action=iframe&disableLink=1&widget=1&moduleToWidgetize=Actions&actionToWidgetize=getPageUrls&idSite='+clientId+'&period=day&date=yesterday#?'+selectDate+'" scrolling="yes" frameborder="0" marginheight="0" marginwidth="0"></iframe>');
			}

			//CALENDARIO POR DIA
			function calendarPeriodDay(){
				jQuery("#calendarPeriodDay").datepicker({
					changeYear: true,
					changeMonth: true,
					minDate: new Date(jQuery("#InitdateSelected").val()),
					maxDate: new Date(),
					onSelect: function(dateText) {
						var dateParts = dateText.split('/');
						var month = dateParts[0];
						var day = dateParts[1];
						var year = dateParts[2];
						var formattedDate = year + '-' + ('0' + month).slice(-2) + '-' + ('0' + day).slice(-2);
						jQuery("#dateSelected").val(formattedDate);
						jQuery("#textDateSelected").text(formattedDate);
						createAnalitycsIframe("period=day&date="+formattedDate,jQuery("#idSite").val());
					}
				}).datepicker("setDate", new Date());
			}

			//CALENDARIO POR SEMANA
			function calendarPeriodWeek(){
				var selectCurrentWeek = function() {
					window.setTimeout(function () {
						jQuery("#calendarPeriodWeek").find(".ui-datepicker-current-day a").addClass("ui-state-active");
					}, 1);
				}

				jQuery("#calendarPeriodWeek").datepicker({
					changeYear: true,
					changeMonth: true,
					minDate: new Date(jQuery("#InitdateSelected").val()),
					maxDate: new Date(),
					showOtherMonths: true,
					selectOtherMonths: true,
					onSelect: function(dateText, inst) { 
						var date = jQuery(this).datepicker('getDate');
						startDate_Week = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay());
						endDate_Week = new Date(date.getFullYear(), date.getMonth(), date.getDate() - date.getDay() + 6);
						var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
						
						var dateParts = dateText.split('/');
						var month = dateParts[0];
						var day = dateParts[1];
						var year = dateParts[2];
						var formattedDate = year + '-' + ('0' + month).slice(-2) + '-' + ('0' + day).slice(-2);
						jQuery("#dateSelected").val(formattedDate);
						jQuery("#textDateSelected").text(formattedDate);
						selectCurrentWeek();

						createAnalitycsIframe("?period=week&date="+formattedDate,jQuery("#idSite").val());
					},
					beforeShowDay: function(date) {
						var cssClass = '';
						if(date >= startDate_Week && date <= endDate_Week)
							cssClass = 'ui-datepicker-current-day';
						return [true, cssClass];
					},
					onChangeMonthYear: function(year, month, inst) {
						selectCurrentWeek();
					}
				});
			}

			//CALENDARIO POR MES
			function calendarPeriodMonth(){
				var selectCurrentMonth = function() {
					window.setTimeout(function () {
						jQuery("#calendarPeriodMonth").find('.ui-datepicker-current-day a').addClass('ui-state-active')
					}, 1);
				}

				jQuery("#calendarPeriodMonth").datepicker({
					showOtherMonths: true,
					selectOtherMonths: true,
					minDate: new Date(jQuery("#InitdateSelected").val()),
					maxDate: new Date(),
					changeMonth: true,
					changeYear: true,
					onSelect: function(dateText, inst) {
						var date = jQuery(this).datepicker('getDate');
						if (date !== null) {
							startDate_Month = new Date(date.getFullYear(), date.getMonth(), 1);
							endDate_Month = new Date(date.getFullYear(), date.getMonth() + 1, 0);
							var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
							var dateParts = dateText.split('/');
							var month = dateParts[0];
							var day = dateParts[1];
							var year = dateParts[2];
							var formattedDate = year + '-' + ('0' + month).slice(-2) + '-' + ('0' + day).slice(-2);
							jQuery("#dateSelected").val(formattedDate);
							jQuery("#textDateSelected").text(formattedDate);
						}
						selectCurrentMonth();
						createAnalitycsIframe("period=month&date="+formattedDate,jQuery("#idSite").val());
					},
					beforeShowDay: function(date) {
						var cssClass = '';
						// Resalta todo el mes seleccionado
						if (startDate_Month && date.getFullYear() === startDate_Month.getFullYear() && date.getMonth() === startDate_Month.getMonth()) {
							cssClass = 'ui-datepicker-current-day';
						}
						return [true, cssClass];
					},
					onChangeMonthYear: function(year, month, inst) {
						selectCurrentMonth();
					}
				});
			}

			//CALENDARIO POR AÑO
			function calendarPeriodYear(){
				var selectCurrentYear = function() {
					window.setTimeout(function () {
						jQuery('#calendarPeriodYear').find('.ui-datepicker-current-day a').addClass('ui-state-active')
					}, 1);
				}

				jQuery('#calendarPeriodYear').datepicker({
					showOtherMonths: true,
					selectOtherMonths: true,
					minDate: new Date(jQuery("#InitdateSelected").val()),
					maxDate: new Date(),
					changeMonth: true,
					changeYear: true,
					onSelect: function(dateText, inst) {
						var date = $(this).datepicker('getDate');
						if (date !== null) {
							startDate_Year = new Date(date.getFullYear(), 0, 1);
							endDate_Year = new Date(date.getFullYear(), 11, 31);
							var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
							var dateParts = dateText.split('/');
							var month = dateParts[0];
							var day = dateParts[1];
							var year = dateParts[2];
							var formattedDate = year + '-' + ('0' + month).slice(-2) + '-' + ('0' + day).slice(-2);
							jQuery("#dateSelected").val(formattedDate);
							jQuery("#textDateSelected").text(formattedDate);
						}
						selectCurrentYear();
						createAnalitycsIframe("period=year&date="+formattedDate,jQuery("#idSite").val());
					},
					beforeShowDay: function(date) {
						var cssClass = '';
						if (startDate_Year && date.getFullYear() === startDate_Year.getFullYear()) {
							cssClass = 'ui-datepicker-current-day';
						}
						return [true, cssClass];
					},
					onChangeMonthYear: function(year, month, inst) {
						selectCurrentYear();
					}
				});
			}

			//CALENDARIO POR RANGO
			function calendarPeriodRange(){
				jQuery("#calendarPeriodRangeStart").datepicker({
					showOtherMonths: true,
					selectOtherMonths: true,
					minDate: new Date(jQuery("#InitdateSelected").val()),
					maxDate: new Date(),
					changeMonth: true,
					changeYear: true,
					//dateFormat: "yy-mm-dd",  // Formato de la fecha
					onSelect: function(dateText, inst, selectedDate) {
						// Cuando se selecciona una fecha en "Desde", establecer la fecha mínima en el campo "Hasta"
						var minDate = jQuery(this).datepicker("getDate"); // Obtener la fecha seleccionada en "Desde"
						jQuery("#calendarPeriodRangeEnd").datepicker("option", "minDate", minDate); // Establecer minDate en el campo "Hasta"

						var dateParts_ = dateText.split('/');
						var month_ = dateParts_[0];
						var day_ = dateParts_[1];
						var year_ = dateParts_[2];
						var formattedDate_ = year_ + '-' + ('0' + month_).slice(-2) + '-' + ('0' + day_).slice(-2);

						jQuery("#dateSelected").val(formattedDate_);
						jQuery("#calendarPeriodRangeFrom").text(formattedDate_);
					}
				});

				// Inicializar el datepicker para el campo "Hasta"
				jQuery("#calendarPeriodRangeEnd").datepicker({
					showOtherMonths: true,
					selectOtherMonths: true,
					maxDate: new Date(),
					changeMonth: true,
					changeYear: true,
					//dateFormat: "yy-mm-dd",  // Formato de la fecha
					onSelect: function(dateText, inst, selectedDate) {
						// Cuando se selecciona una fecha en "Hasta", establecer la fecha máxima en el campo "Desde"
						var maxDate = jQuery(this).datepicker("getDate"); // Obtener la fecha seleccionada en "Hasta"
						jQuery("#calendarPeriodRangeStart").datepicker("option", "maxDate", maxDate); // Establecer maxDate en el campo "Desde"

						var dateParts_t = dateText.split('/');
						var month_t = dateParts_t[0];
						var day_t = dateParts_t[1];
						var year_t = dateParts_t[2];
						var formattedDate_t = year_t + '-' + ('0' + month_t).slice(-2) + '-' + ('0' + day_t).slice(-2);
						jQuery("#dateSelected").val(formattedDate_t);
						jQuery("#calendarPeriodRangeTo").text(formattedDate_t);
					}
				});
			}
			
			calendarPeriodDay();
			calendarPeriodWeek();
			calendarPeriodMonth();
			calendarPeriodYear();
			
			//INICIALIZAMOS EL PINTADO DE LAS GRAFICAS
			createAnalitycsIframe("period=day&date="+jQuery("#dateSelected").val(),jQuery("#idSite").val());

			//TAB PARA CAMBIAR DE GRAFICA EN GRAFICA
			jQuery(document).on('click', '.js-active-tab', function(event){
				event.preventDefault();
				var tabId = jQuery(this).attr("data-tab");
				jQuery(".js-tab-item").removeClass("active in");
				jQuery(".js-active-tab").removeClass("active");
				jQuery(this).addClass("active");
				jQuery(tabId).addClass("active");
				jQuery(".js-select-item-list").removeClass("active");
				jQuery(".js-select-item-list").text(jQuery(this).text());
				setTimeout(function(){ 
					jQuery(tabId).addClass("in");
				}, 300);
			});

			jQuery(document).on('click', '.js-select-item-list', function(event){
				event.preventDefault();
				jQuery(this).toggleClass("active");
			});
			
			//SELECCION DE PERIODO
			jQuery(document).on('click', '.js-chk-period', function(){
				jQuery(".ms-hidden_calendar").removeClass("active");
				var checkValue = jQuery(".js-chk-period:checked").val();
				jQuery("#calendarPeriodDay").datepicker('setDate', null); 
				jQuery("#calendarPeriodWeek").datepicker('setDate', null);
				jQuery("#calendarPeriodMonth").datepicker('setDate', null); 
				jQuery("#calendarPeriodYear").datepicker('setDate', null);
				jQuery("#calendarPeriodRangeStart").datepicker('destroy');
				jQuery("#calendarPeriodRangeEnd").datepicker('destroy');
				switch (checkValue) {
					case 'period_id_day':
					jQuery("#calendarPeriodDay").addClass("active");
					break;
					
					case 'period_id_week':
					jQuery("#calendarPeriodWeek").addClass("active");
					break;

					case 'period_id_month':
					jQuery("#calendarPeriodMonth").addClass("active");
					break;

					case 'period_id_year':
					jQuery("#calendarPeriodYear").addClass("active");
					break;

					case 'period_id_range':
					calendarPeriodRange();
					jQuery("#calendarPeriodRange").addClass("active");
					break;
				}
			});

			//APLICANDO EL FILTRO
			jQuery(document).on('click', '#dataFilterApply', function(event){
				event.preventDefault();
				var checkValue = jQuery(".js-chk-period:checked").val();
				
				if(checkValue == "period_id_range"){
					createAnalitycsIframe("period=range&date="+jQuery("#calendarPeriodRangeFrom").text()+","+jQuery("#calendarPeriodRangeTo").text(),jQuery("#idSite").val());
					jQuery("#textDateSelected").text("From "+jQuery("#calendarPeriodRangeFrom").text()+" to "+jQuery("#calendarPeriodRangeTo").text());
				}
			});

			//SHOW MODAL CALENDAR
			jQuery(document).on('click', '.js-show-calendar', function(event){
				event.preventDefault();
				jQuery(this).toggleClass("-active");
			});
			
			
			/*
			jQuery(document).on('click', '#dataFilterApply', function(event){
				event.preventDefault();
				var checkValue = jQuery(".js-chk-period:checked").val();
				switch (checkValue) {
					case 'period_id_day':
					createAnalitycsIframe("period=day&date="+jQuery("#dateSelected").val(),jQuery("#idSite").val());
					break;
					
					case 'period_id_week':
					createAnalitycsIframe("?period=week&date="+jQuery("#dateSelected").val(),jQuery("#idSite").val());
					break;

					case 'period_id_month':
					createAnalitycsIframe("period=month&date="+jQuery("#dateSelected").val(),jQuery("#idSite").val());
					break;

					case 'period_id_year':
					createAnalitycsIframe("period=year&date="+jQuery("#dateSelected").val(),jQuery("#idSite").val());
					break;

					case 'period_id_range':
					createAnalitycsIframe("period=range&date="+jQuery("#calendarPeriodRangeFrom").text()+","+jQuery("#calendarPeriodRangeTo").text(),jQuery("#idSite").val());
					break;
				}

			});
			*/

		</script>
	</body>
</html>
